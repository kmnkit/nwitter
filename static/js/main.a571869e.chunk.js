(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(6),a=n(53),r=n.n(a),s=n(11),i=n(41),o=n(14),u=n(0),j=n.n(u),b=n(1),l=n(54),O=n(27),d=n(18),f=n(39);Object(l.a)({apiKey:"AIzaSyD3GRwsM1yGqJ6khnseSOeX1LRNSEuTqlM",authDomain:"nwitter-marco.firebaseapp.com",databaseURL:"nwitter-marco.appspot.com",projectId:"nwitter-marco",storageBucket:"nwitter-marco.appspot.com",messagingSenderId:"42448783356",appId:"1:42448783356:web:28f10401c5a69859509479"});var x=Object(O.c)(),p=Object(d.d)(),h=Object(f.b)(),m=n(31),v=n(32),g=n(28),w=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){document.querySelector("title").innerHTML="".concat(n," | Nwitter")}),[n]),a},N=n(7),y=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),o=i[0],u=i[1],l=Object(c.useState)(!0),O=Object(s.a)(l,2),d=O[0],f=O[1],p=Object(c.useState)(""),h=Object(s.a)(p,2),y=h[0],k=h[1],S=w(),B=function(e){var t=e.target,n=t.name,c=t.value;"email"===n?a(c):"password"===n&&u(c)},C=function(){var e=Object(b.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!d){e.next=10;break}return e.next=5,Object(m.c)(x,n,o);case 5:return c=e.sent,e.next=8,Object(m.h)(c,{displayName:"Anonymous"});case 8:e.next=12;break;case 10:return e.next=12,Object(m.f)(x,n,o);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),k(e.t0.errorMessage);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){S("Auth")}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"logoBox",children:Object(N.jsx)(g.a,{className:"logo",icon:v.c})}),Object(N.jsxs)("form",{onSubmit:C,className:"LoginForm",children:[Object(N.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:B}),Object(N.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:o,onChange:B}),Object(N.jsx)("div",{className:"BtnContainer",children:Object(N.jsx)("input",{className:"Btn SignupBtn",type:"submit",value:d?"Create Account":"Log In"})}),y]}),Object(N.jsx)("div",{className:"Transform",children:Object(N.jsx)("span",{onClick:function(){return f((function(e){return!e}))},children:d?"Click to Log In":"Click to Create Account"})})]})},k=function(){var e,t=function(){var t=Object(b.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),"google"===(c=n.target.name)?e=new O.b:"github"===c&&(e=new O.a),t.next=6,Object(O.e)(x,e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)("div",{children:[Object(N.jsx)(y,{}),Object(N.jsxs)("div",{className:"SocialLoginBox",children:[Object(N.jsxs)("button",{className:"Btn GoogleLogin",onClick:t,name:"google",children:["Continue with Google ",Object(N.jsx)(g.a,{icon:v.b})]}),Object(N.jsxs)("button",{className:"Btn GithubLogin",onClick:t,name:"github",children:["Continue with Github ",Object(N.jsx)(g.a,{icon:v.a})]})]})]})},S=n(17),B=n(49),C=n(55),U=n.n(C),E=n(56),I=function(e){var t=e.nweetObj,n=e.isOwner,a=Object(c.useState)(!1),r=Object(s.a)(a,2),i=r[0],o=r[1],u=Object(c.useState)(t.text),l=Object(s.a)(u,2),O=l[0],x=l[1],m=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this nweet?")){e.next=7;break}return e.next=4,Object(d.b)(Object(d.c)(p,"nweets",t.id));case 4:if(""===t.attachmentUrl){e.next=7;break}return e.next=7,Object(f.a)(Object(f.c)(h,t.attachmentUrl));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){return o((function(e){return!e}))},w=function(){var e=Object(b.a)(j.a.mark((function e(n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=Object(d.c)(p,"nweets",t.id),e.next=4,Object(d.j)(c,{text:O});case 4:o(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{children:i?Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("form",{onSubmit:w,className:"editNweetBox",children:[Object(N.jsx)("input",{type:"text",placeholder:"Edit your Nweet",value:O,onChange:function(e){var t=e.target.value;x(t)},required:!0}),Object(N.jsxs)("div",{children:[Object(N.jsx)("input",{type:"submit",value:"Update Nweet",className:"Btn updateBtn"}),Object(N.jsx)("button",{onClick:v,className:"Btn cancelBtn",children:"Cancel"})]})]})}):Object(N.jsxs)("div",{className:"NweetBox",children:[Object(N.jsx)("div",{className:"PhotoContainer",children:Object(N.jsx)("div",{className:"Photo",children:Object(N.jsx)(g.a,{className:"usericon",icon:E.a})})}),Object(N.jsxs)("div",{className:"NweetContainer",children:[Object(N.jsx)("span",{className:"userInfo",children:t.creatorId}),Object(N.jsxs)("div",{className:"NweetContainer__inner",children:[Object(N.jsx)("p",{className:"nweetText",children:t.text}),t.attachmentUrl&&Object(N.jsx)("img",{src:t.attachmentUrl,width:"50px",height:"50px",alt:""}),n&&Object(N.jsxs)("div",{className:"btnContainer",children:[Object(N.jsx)("button",{className:"Btn delBtn",onClick:m,children:"Delete Nweet"}),Object(N.jsx)("button",{className:"Btn editBtn",onClick:v,children:"Edit Nweet"})]})]})]})]})},t.id)},L=n(36),A=n(37),F=n(84),D=function(e){var t=e.userObj,n=Object(c.useState)(""),a=Object(s.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(""),u=Object(s.a)(o,2),l=u[0],O=u[1],d=function(){var e=Object(b.a)(j.a.mark((function e(n){var c,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c="",""===r){e.next=10;break}return a=Object(A.d)(h,"".concat(t.uid,"/").concat(Object(F.a)())),e.next=6,Object(A.e)(a,r,"data_url");case 6:return s=e.sent,e.next=9,Object(A.b)(s.ref);case 9:c=e.sent;case 10:return e.next=12,Object(L.a)(Object(L.b)(p,"nweets"),{text:l,createdAt:Object(L.j)(),creatorId:t.uid,attachmentUrl:c});case 12:O(""),i("");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("form",{onSubmit:d,className:"nweetForm",children:[Object(N.jsx)("textarea",{value:l,onChange:function(e){var t=e.target.value;O(t)},rows:"5",placeholder:"What's on your mind?",maxLength:120}),Object(N.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;i(t)},n.readAsDataURL(t)}}),r&&Object(N.jsxs)("div",{className:"attachment",children:[Object(N.jsx)("img",{src:r,width:"50px",height:"50px",alt:""}),Object(N.jsx)("button",{onClick:function(){return i("")},children:"Clear"})]}),Object(N.jsx)("input",{className:"Btn NweetBtn",type:"submit",value:"Nweet"})]})};var P,q=function(e){var t=e.userObj,n=function(){var e=Object(c.useState)(1),t=Object(s.a)(e,2),n=t[0],a=t[1];function r(){document.documentElement.scrollTop+window.innerHeight===document.documentElement.scrollHeight&&a((function(e){return e+1}))}return Object(c.useEffect)((function(){window.addEventListener("scroll",r)}),[]),n}(),a=Object(c.useState)([]),r=Object(s.a)(a,2),i=r[0],o=r[1],u=Object(c.useState)(!1),j=Object(s.a)(u,2),b=(j[0],j[1]),l=Object(c.useState)([]),O=Object(s.a)(l,2),f=O[0],x=O[1];return Object(c.useEffect)((function(){try{var e=Object(d.h)(Object(d.a)(p,"nweets"),Object(d.g)("createdAt","desc"),Object(d.e)(10));Object(d.f)(e,(function(e){var t=e.docs[e.docs.length-1];x(t);var n=e.docs.map((function(e){return Object(B.a)({id:e.id},e.data())}));o(n)}))}catch(t){b(t)}}),[]),Object(c.useEffect)((function(){console.log("\ub450\ubc88\uc9f8 \uc774\ud6c4 \ub77c\uc2a4\ud2b8"),console.log(f);try{var e=Object(d.h)(Object(d.a)(p,"nweets"),Object(d.g)("createdAt","desc"),Object(d.i)(f),Object(d.e)(10));Object(d.f)(e,(function(e){var t=e.docs[e.docs.length-1];x(t);var n=e.docs.map((function(e){return Object(B.a)({id:e.id},e.data())})),c=[].concat(Object(S.a)(i),Object(S.a)(n));o(U()(c,"id"))}))}catch(t){b(t),console.log("\ud398\uc774\uc9c0 \uac31\uc2e0 \ud6c4 useEffect \uc5d0\ub7ec"),console.log(t),console.log(f)}}),[n]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(D,{userObj:t}),Object(N.jsx)("div",{children:i.map((function(e){return Object(N.jsx)(I,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},G=function(e){var t=e.userObj,n=e.refreshUser,a=w(),r=Object(o.g)(),i=Object(c.useState)(t.displayName),u=Object(s.a)(i,2),l=u[0],d=u[1],f=function(){var e=Object(b.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),t.displayName===l){e.next=5;break}return e.next=4,Object(O.f)(x.currentUser,{displayName:l});case 4:n();case 5:case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){a("Profile")}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("form",{onSubmit:f,children:[Object(N.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;d(t)},placeholder:"Display Name",value:l}),Object(N.jsx)("input",{type:"submit",className:"Btn updateProfileBtn",value:"Update Profile"})]}),Object(N.jsx)("button",{onClick:function(){x.signOut(),r.push("/")},className:"Btn logoutBtn",children:"Log Out"})]})},R=function(e){var t=e.userObj;return Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:Object(N.jsx)(i.b,{to:"/",children:Object(N.jsx)("div",{className:"logoBox",children:Object(N.jsx)(g.a,{className:"logo",icon:v.c})})})}),Object(N.jsx)("li",{children:Object(N.jsxs)(i.b,{to:"/profile",children:[t.displayName?t.displayName:"Anynomous","\uc758 Profile"]})})]})},T=function(e){var t=e.isLoggedIn,n=e.userObj,c=e.refreshUser;return Object(N.jsxs)(i.a,{children:[t&&Object(N.jsx)(R,{userObj:n}),Object(N.jsx)(o.d,{children:t?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(o.b,{exact:!0,path:"/",children:Object(N.jsx)(q,{userObj:n})}),Object(N.jsx)(o.b,{exact:!0,path:"/profile",children:Object(N.jsx)(G,{userObj:n,refreshUser:c})}),Object(N.jsx)(o.a,{from:"*",to:"/"})]}):Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(o.b,{exact:!0,path:"/",children:Object(N.jsx)(k,{})})})})]})},H=n(58),M=n(42),z=n(59),J=Object(M.a)(P||(P=Object(H.a)(["\n    ",";\n    a{\n        text-decoration:none;\n        color:inherit;\n    }\n    *{\n        box-sizing:border-box;\n        border: none;\n        outline: none;\n    }\n    body{\n        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n        font-size:12px;\n        background-color: skyblue;\n        color:white;\n        padding-top:10px;\n        padding-left: 10px;\n        padding-right: 10px;        \n    }\n"])),z.a);n(81);var _=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),i=Object(s.a)(r,2),o=i[0],u=i[1],j=w();return Object(c.useEffect)((function(){j("Home"),Object(O.d)(x,(function(e){u(!!e&&{uid:e.uid,displayName:e.displayName}),a(!0)}))}),[]),Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)(J,{}),n?Object(N.jsx)(T,{refreshUser:function(){var e=x.currentUser;u({uid:e.uid,displayName:e.displayName})},isLoggedIn:Boolean(o),userObj:o}):"Initializing..."]})};r.a.render(Object(N.jsx)(_,{}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.a571869e.chunk.js.map